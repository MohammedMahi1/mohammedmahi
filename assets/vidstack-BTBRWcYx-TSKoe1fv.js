import{E as n,q as c,l as a,e as d,a as h,K as u,r as l,i as b}from"./index-CtYW8DRL.js";function g(r,t=3e3){const e=n();return setTimeout(()=>{const s=r();s&&e.reject(s)},t),e}class p{constructor(t){this.eb=t,this.db=c(""),this.referrerPolicy=null,t.setAttribute("frameBorder","0"),t.setAttribute("aria-hidden","true"),t.setAttribute("allow","autoplay; fullscreen; encrypted-media; picture-in-picture; accelerometer; gyroscope"),this.referrerPolicy!==null&&t.setAttribute("referrerpolicy",this.referrerPolicy)}get iframe(){return this.eb}setup(){a(window,"message",this.Mg.bind(this)),a(this.eb,"load",this.mc.bind(this)),d(this.gd.bind(this))}gd(){const t=this.db();if(!t.length){this.eb.setAttribute("src","");return}const e=h(()=>this.Ue());this.eb.setAttribute("src",u(t,e))}hd(t,e){var s;l||(s=this.eb.contentWindow)==null||s.postMessage(JSON.stringify(t),e??"*")}Mg(t){var o;const e=this.fb();if((t.source===null||t.source===((o=this.eb)==null?void 0:o.contentWindow))&&(!b(e)||e===t.origin)){try{const i=JSON.parse(t.data);i&&this.jd(i,t);return}catch{}t.data&&this.jd(t.data,t)}}}export{p as E,g as t};
